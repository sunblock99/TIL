# PAM(Pluggable Authentication Modules)란

- Linux 에서 사용되는 인증 모듈로써, 사용자의 사용 권한(접근, 패스워드 등)을 제어하는 모듈입니다.

업무를 보면서 해당 개념을 처음 접했는데요.

PAM을 사용하기 이전의 리눅스는, 각 응용프로그램에서 자체적으로 로직을 구현하여야 했다고 합니다.

이유는, 별도의 접근제어툴 등을 사용하여 접근, 명령어, 원격접속 등의 관리를 수행하고있기 때문이었습니다.

[PAM의 동작 원리]

![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbVaDZu%2Fbtq7jC6JjOE%2FzhG5t2V7yYYCjjskDs0OFk%2Fimg.png)

<br>
<br>
<br>

## Module type

- auth : 사용자에게 비밀번호를 요청하고 입력 받은 정보가 맞는지 검사하는 모듈

- account : 명시된 계정이 현재 조건에서 유효한 인증 목표인지 검사하는 것으로 계정에 대한 접근 통제 및 계정 절책을 관리하는 모듈

- password : 사용자가 인증 정보를 변경할 수 있도록 비밀번호 갱신을 주관하는 모듈

- session : 사용자가 인증을 받기 전/후에 수행해야 할 일을 정의하는 모듈

<br>
<br>
<br>

## Control flag

<br>
<br>
<br>
<br>
Requisite : 인증 결과와 실패일 경우, 인증 종료

               - 인증 결과가 성공일 경우, 다음 인증 모듈 실행(최종 인증 결과에 미반영)

               - 인증 결과가 실패일 경우, 즉시 인증 실패를 반환

Required : 인증 결과와 관계없이 다음 인증 실행

               - 인증 결과가 성공일 경우, 최종 인증 결과는 무조건 성공

               - 인증 결과가 실패일 경우, 최종 인증 결과는 무조건 실패

-------------> Required는 가장 높은 우선순위를 가짐.

                  해당 컨트롤 플래그가 실패하면 최종 인증결과는 실패가 된다는 사실에 주의할 것.

Sufficient : 인증 결과가 성공일 경우, 인증 종료

                - 인증 결과가 성공일 경우, 즉시 인증 성공을 반환

                - 인증 결과가 실패일 경우, 다음 인증 모듈 실행(최종 인증 결과에 미반영)

Optional : 일반적으로 최종 인증 결과에 반영되지 않음.

               단, 다른 인증 모듈의 명확한 성공/실패가 없다면 이 모듈의 결과를 반환

Include : 다른 PAM 설정 파일 호출

<Br><Br><Br><Br>

[결론]

접근제어툴이 없는 회사의 경우 PAM을 사용하는 것이 접근 인증을 일부 강화시킬 수 있습니다.

하지만, 잘못 설정할 경우 비인가자에게 접근을 허용하게 될 수 있으며, PAM을 잘 설정하였다고 하더라도 응용프로그램자체의 권한 설정에 따라 실행권한이 없을 경우 사용자 인증 자체를 수행할 수 없기 때문에 실행권한 등도 적절하게 부여해야합니다.

기업이 취약점 진단 혹은 감사를 받을 때 고려해야하는 사항은 다수 있겠지만 주요한 사항은 아래와 같을 것입니다.

PAM을 사용하고 있는지, PAM의 패스워드 모듈을 사용하고 있다면 패스워드 설정값이 적정한지, PAM의 su관련 모듈을 사용하고 있다면 적정한 계정인지.. 등이 있을 것으로 예상됩니다.
